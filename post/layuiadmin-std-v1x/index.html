<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" >

<title>layuiAdmin std v1.x 【iframe版】开发者文档 | Crazer的自留地</title>
<meta name="description" content="静坐长思己过，闲谈莫论人非">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="https://acoldfront.github.io//favicon.ico?v=1604030507482">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="https://acoldfront.github.io//styles/main.css">


  
    <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css" />
  

  


<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>

<link rel="stylesheet" href="https://unpkg.com/aos@next/dist/aos.css" />



  </head>
  <body>
    <div id="app" class="main">

      <div class="sidebar" :class="{ 'full-height': menuVisible }">
  <div class="top-container" data-aos="fade-right">
    <div class="top-header-container">
      <a class="site-title-container" href="https://acoldfront.github.io/">
        <img src="https://acoldfront.github.io//images/avatar.png?v=1604030507482" class="site-logo">
        <h1 class="site-title">Crazer的自留地</h1>
      </a>
      <div class="menu-btn" @click="menuVisible = !menuVisible">
        <div class="line"></div>
      </div>
    </div>
    <div>
      
        
          <a href="/" class="site-nav">
            首页
          </a>
        
      
        
          <a href="/archives" class="site-nav">
            归档
          </a>
        
      
        
          <a href="/tags" class="site-nav">
            标签
          </a>
        
      
        
          <a href="/post/about" class="site-nav">
            关于
          </a>
        
      
    </div>
  </div>
  <div class="bottom-container" data-aos="flip-up" data-aos-offset="0">
    <div class="social-container">
      
        
      
        
      
        
      
        
      
        
      
    </div>
    <div class="site-description">
      静坐长思己过，闲谈莫论人非
    </div>
    <div class="site-footer">
      Powered by <a href="https://acoldfront.github.io/" target="_blank">Crazer</a> | <a class="rss" href="https://acoldfront.github.io//atom.xml" target="_blank">RSS</a>
    </div>
  </div>
</div>


      <div class="main-container">
        <div class="content-container" data-aos="fade-up">
          <div class="post-detail">
            <h2 class="post-title">layuiAdmin std v1.x 【iframe版】开发者文档</h2>
            <div class="post-date">2020-10-29</div>
            
            <div class="post-content">
              <blockquote>
<p>layuiAdmin.std（iframe 版） 是完全基于 layui 架构而成的通用型后台管理模板系统，采用传统的 iframe 多页面开发模式，可更快速直接地开发网页后台应用程序，无需过多地学习成本，简单高效，撸起袖子直接干。</p>
</blockquote>
<!-- more -->
<h2 id="题外">题外</h2>
<hr>
<ul>
<li>该文档适用于 layuiAdmin.std 常规版（iframe），阅读之前请务必确认是否与你使用的版本对应。</li>
<li>熟练掌握 layuiAdmin 的前提是熟练掌握 layui，因此除了本篇文档， <a href="https://www.layui.com/doc/">layui 的文档</a> 也是必不可少的存在。</li>
</ul>
<h2 id="快速上手">快速上手</h2>
<hr>
<h3 id="目录说明">目录说明</h3>
<p>解压文件后，你将看到以下目录：</p>
<ul>
<li>
<p><strong>src/</strong></p>
<p>layuiAdmin 源代码，通常用于开发环境（如本地）。</p>
<ul>
<li><strong>src/layuiadmin/：</strong> layuiAdmin 的静态资源（JS、CSS、模块碎片等）
<ul>
<li>src/layuiadmin/json/：模拟接口返回的 JSON 相应信息，实际应用时可无视。</li>
<li>src/layuiadmin/layui/：layui 基础框架，功能一般领先于官网提供下载的版本。</li>
<li>src/layuiadmin/lib/：layuiAdmin 的核心模块，通常不建议修改。</li>
<li>src/layuiadmin/modules/：layuiAdmin 的业务模块</li>
<li>src/layuiadmin/style/：layuiAdmin 的样式文件</li>
<li>src/layuiadmin/tpl/：layuiAdmin 部分区块可能用到的模版碎片</li>
<li>src/layuiadmin/config.js：全局配置文件</li>
</ul>
</li>
<li><strong>src/views/：</strong> layuiAdmin 提供的视图文件，你可以将其移动到你服务端工程的 view 层中，注意修改 JS/CSS 的路径即可。</li>
</ul>
</li>
<li>
<p><strong>dist/</strong></p>
<p>通过 gulp 将 资源包的 src 目录的源代码进行构建后生成的目录（即：将 JS 和 CSS 文件进行了压缩等处理），通常用于线上环境。关于 gulp 的使用，下文也有介绍。</p>
</li>
</ul>
<h3 id="部署到服务端">部署到服务端</h3>
<ol>
<li>将 src 目录中的 views 文件夹整个复制到你 服务端工程 的 view 层中，通过本地 web 服务器访问（Tomcat / IIS / Apache / Nginx 等）</li>
<li>确保可以访问后，修改好 HTML 文件中的 JS/CSS 路径，即可正常运行页面。</li>
</ol>
<blockquote>
<p><em><strong>iframe 常规版</strong></em> 相比于 <em><strong>单页面模式的专业版</strong></em> ，无论是在目录结构还是开发模式上都要简单很多。因为单页版是接管了服务端 MVC 的视图层，而 iframe 版则将视图交给了服务端来控制和输出，可以避免鉴权的复杂程度，直接可衔接好新老项目（因为你们的大部分老项目都是采用 iframe 模式）。</p>
</blockquote>
<h3 id="全局配置">全局配置</h3>
<p>当你已经顺利在本地预览了 layuiAdmin 后，你一定迫不及待关注更深层的结构。假设你页面引入的是 src 目录 的 JS，你还需要关注的是 src/layuiadmin/<br>
目录中的 config.js，它里面存储着所有的默认配置。你可以按照实际需求选择性修改：</p>
<pre><code class="language-javascript">layui.define(['laytpl', 'layer', 'element', 'util'], function(exports){
  exports('setter', {
    container: 'LAY_app' //容器ID
    ,base: layui.cache.base //记录静态资源所在路径
    ,views: layui.cache.base + 'tpl/' //动态模板所在目录
    ,entry: 'index' //默认视图文件名
    ,engine: '.html' //视图文件后缀名
    ,pageTabs: true //是否开启页面选项卡功能。iframe 版推荐开启
    
    ,name: 'layuiAdmin'
    ,tableName: 'layuiAdmin' //本地存储表名
    ,MOD_NAME: 'admin' //模块事件名
    
    ,debug: true //是否开启调试模式。如开启，接口异常时会抛出异常 URL 等信息

    //自定义请求字段
    ,request: {
      tokenName: false //自动携带 token 的字段名（如：access_token）。可设置 false 不携带。
    }
    
    //自定义响应字段
    ,response: {
      statusName: 'code' //数据状态的字段名称
      ,statusCode: {
        ok: 0 //数据状态一切正常的状态码
        ,logout: 1001 //登录状态失效的状态码
      }
      ,msgName: 'msg' //状态信息的字段名称
      ,dataName: 'data' //数据详情的字段名称
    }
    
    //扩展的第三方模块
    ,extend: [
      'echarts', //echarts 核心包
      'echartsTheme' //echarts 主题
    ]
    
    //主题配置
    ,theme: {
      //配色方案，如果用户未设置主题，第一个将作为默认
      color: [{
        main: '#20222A' //主题色
        ,selected: '#009688' //选中色
        ,logo: '' //logo区域背景色
        ,header: '' //头部区域背景色
        ,alias: 'default' //默认别名
      }] //为了减少篇幅，更多主题此处不做列举，可直接参考 config.js

      //初始的颜色索引，对应上面的配色方案数组索引
      //如果本地已经有主题色记录，则以本地记录为优先，除非清除 LocalStorage（步骤：F12呼出调试工具→Aplication→Local Storage→选中页面地址→layuiAdmin→再点上面的X）
      // 1.0 正式版开始新增
      ,initColorIndex: 0
    }
  });
});
</code></pre>
<h2 id="基础方法">基础方法</h2>
<hr>
<ul>
<li>config 模块</li>
</ul>
<p>​    你可以在任何地方通过 layui.setter 得到 config.js 中的配置信息。如：</p>
<pre><code>layui.setter.base
</code></pre>
<ul>
<li>admin 模块</li>
</ul>
<pre><code>var admin = layui.admin;
</code></pre>
<ul>
<li>admin.req(options)</li>
</ul>
<p>​    Ajax 请求，用法同 $.ajax(options)，只是该方法会进行错误处理</p>
<ul>
<li>admin.screen()</li>
</ul>
<p>​    获取屏幕类型，根据当前屏幕大小，返回 0 - 3 的值</p>
<pre><code>0: 低于768px的屏幕
1：768px到992px之间的屏幕
2：992px到1200px之间的屏幕
3：高于1200px的屏幕
</code></pre>
<ul>
<li>admin.sideFlexible(status)</li>
</ul>
<p>​    侧边伸缩。</p>
<p>​    status 为 null：收缩；</p>
<p>​    status为 “spread”：展开</p>
<ul>
<li>admin.on(eventName, callback)</li>
</ul>
<p>​    事件监听，下文会有讲解</p>
<ul>
<li>admin.popup(options)</li>
</ul>
<p>​    弹出一个 layuiAdmin 主题风格的 layer 层，参数 options 跟 layer.open(options) 完全相同</p>
<ul>
<li>admin.popupRight(options)</li>
</ul>
<p>​    在屏幕右侧呼出一个面板层。options 同上。</p>
<pre><code class="language-javascript">admin.popupRight({
  id: 'LAY-popup-right-new1' //定义唯一ID，防止重复弹出
  ,success: function(){
    //将 views 目录下的某视图文件内容渲染给该面板
    layui.view(this.id).render('视图文件所在路径');
  }
});
</code></pre>
<ul>
<li>admin.resize(callback)</li>
</ul>
<p>​    窗口 resize 事件处理，我们推荐你使用该方法取代 jQuery 的 resize 事件，以避免多页面标签下可能存在的冲突。</p>
<ul>
<li>admin.fullScreen()</li>
</ul>
<p>​    全屏</p>
<ul>
<li>admin.exitScreen()</li>
</ul>
<p>​    退出全屏</p>
<ul>
<li>
<p>admin.events</p>
<ul>
<li>admin.events.refresh()</li>
</ul>
<p>​       刷新当前右侧区域</p>
<ul>
<li>admin.events.closeThisTabs()</li>
</ul>
</li>
</ul>
<p>​       关闭当前标签页<br>
注意：如果是在 iframe 页面中执行关闭，需要如下写法：</p>
<pre><code>parent.layui.admin.events.closeThisTabs();
</code></pre>
<ul>
<li>admin.events.closeOtherTabs()</li>
</ul>
<p>​       关闭其它标签页</p>
<ul>
<li>admin.events.closeAllTabs()</li>
</ul>
<p>​       关闭全部标签页</p>
<ul>
<li>view 模块</li>
</ul>
<p>​    用法同 专业版：<a href="http://fly.layui.com/docs/5/#base-view">http://fly.layui.com/docs/5/#base-view</a></p>
<h2 id="在-iframe-页面内部打开新标签">在 iframe 页面内部打开新标签</h2>
<hr>
<blockquote>
<p>通常你会涉及一些在右侧 iframe 页面内部去打开一个新标签的需求，目前有以下方式可以实现</p>
</blockquote>
<h3 id="方法一">方法一：</h3>
<p>直接在 a 标签上加上相关属性</p>
<pre><code class="language-html">&lt;a lay-href=&quot;url&quot;&gt;文本&lt;/a&gt;
</code></pre>
<h3 id="方法二">方法二：</h3>
<p>调用 index 模块的相关方法</p>
<pre><code class="language-javascript">parent.layui.index.openTabsPage(href, text); //这里要注意的是 parent 的层级关系
</code></pre>
<h2 id="自定义标签栏标题">自定义标签栏标题</h2>
<hr>
<p>每当你打开一个标签页，头部都会出现标题。它默认读取的是所点元素的文本，但是你也可以自定义标题。</p>
<pre><code class="language-html">&lt;a lay-href=&quot;url&quot; lay-text=&quot;自定义标题文本&quot;&gt;默认读取的文本&lt;/a&gt;
</code></pre>
<ul>
<li>值得说明的是，只要你配置了上述的 lay-href 属性，就会打开一个新的标签，如果要在当前标签跳转，直接配置 href=&quot;&quot; 属性即可。</li>
</ul>
<h2 id="实用组件">实用组件</h2>
<hr>
<h3 id="hover-提示层">Hover 提示层</h3>
<p>通过对元素设置 lay-tips=&quot;提示内容&quot; 来开启一个 hover 提示，如：</p>
<pre><code class="language-html">&lt;i class=&quot;layui-icon layui-icon-tips&quot; lay-tips=&quot;要支持的噢&quot; lay-offset=&quot;5&quot;&gt;&lt;/i&gt;
</code></pre>
<p>其中 lay-offset 用于定于水平偏移距离（单位px），以调整箭头让其对准元素</p>
<h2 id="兼容性">兼容性</h2>
<hr>
<p>layuiAdmin 使用到了 layui 的栅格系统，而栅格则是基于浏览器的媒体查询。ie8、9不支持。<br>
所以要在宿主页面（如 start/index.html ）加上下面这段保证兼容：</p>
<pre><code class="language-html">&lt;!-- 让IE8/9支持媒体查询，从而兼容栅格 --&gt;
&lt;!--[if lt IE 9]&gt;
  &lt;script src=&quot;https://cdn.staticfile.org/html5shiv/r29/html5.min.js&quot;&gt;&lt;/script&gt;
  &lt;script src=&quot;https://cdn.staticfile.org/respond.js/1.4.2/respond.min.js&quot;&gt;&lt;/script&gt;
&lt;![endif]--&gt;  
</code></pre>
<h2 id="升级事项">升级事项</h2>
<hr>
<p>从官网更新资源包后，以 src 目录为例（dist 由于是 src 构建后生成的目录，所以本质是和 src 一样的）<br>
src 目录下可以直接覆盖的有：</p>
<blockquote>
<p>src/json/<br>
src/layui/<br>
src/lib/<br>
src/style/</p>
</blockquote>
<p>需要灵活调配的有：</p>
<blockquote>
<p>src/modules/<br>
src/tpl/<br>
src/config.js</p>
</blockquote>
<p>如果没有改动默认配置，事实上 config.js 也可以覆盖升级</p>
<h2 id="源码构建">源码构建</h2>
<hr>
<p>当你在 src 目录完成开发后，你可通过 gulp 对 src 源码进行自动化构建，以生成用于线上环境的 dist 目录。并在 HTML 源代码中引入该目录的 JS/CSS。</p>
<p>在资源包中根目录下看到的 gulpfile.js 是 layuiAdmin 写好的任务脚本，package.json 是任务配置文件，你只需按照以下步骤：</p>
<ul>
<li>step1：确保你的电脑已经安装好了 <a href="https://nodejs.org/en/">Node.js</a>，如果未安装，可去官网下载安装</li>
<li>step2: 命令行安装 gulp：npm install gulp -g</li>
<li>step3：切换到 layuiAdmin 项目根目录（即 gulpfile.js 所在目录），命令行安装任务所依赖的包：npm install</li>
</ul>
<p><strong>安装完成后，后续只需直接执行命令：gulp 即可完成 src 到 dist 目录的构建</strong></p>
<h1 id="关于版权"><strong>关于版权</strong></h1>
<hr>
<blockquote>
<p>layuiAdmin 受国家计算机软件著作权保护，未经官网正规渠道授权擅自公开产品源文件、以及直接对产品二次出售的，我们将追究相应的法律责任。</p>
</blockquote>

            </div>
            
              <div class="tag-container">
                
                  <a href="https://acoldfront.github.io/tag/-1grusv8O/" class="tag">
                    技术
                  </a>
                
              </div>
            
            
              <div class="next-post">
                <div class="next">下一篇</div>
                <a href="https://acoldfront.github.io/post/batteryinfoview/">
                  <h3 class="post-title">
                    BatteryInfoView v1.23 汉化版
                  </h3>
                </a>
              </div>
            

            
              
                <div id="gitalk-container" data-aos="fade-in"></div>
              

              
            

          </div>

        </div>
      </div>
    </div>

    <script src="https://unpkg.com/aos@next/dist/aos.js"></script>

<script type="application/javascript">

AOS.init();

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>



  
    <script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
    <script>

      var gitalk = new Gitalk({
        clientID: '91b49922808a1fd87554',
        clientSecret: '17de273c86b0e4131b14025e2959ee7ced12da1d',
        repo: 'acoldfront.github.io',
        owner: 'acoldfront',
        admin: ['acoldfront'],
        id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
        distractionFreeMode: false  // Facebook-like distraction free mode
      })

      gitalk.render('gitalk-container')

    </script>
  

  




  </body>
</html>
